# RoboYabaso
for Line Bot - 貓咪玩骰子

【貓咪玩骰子】


本BOT為BB團用，COC6內部跑團工具，
參考了諸位前輩的原碼，
移除了內部少用到的功能，
另外增加了角卡、KP鎖、暗骰功能，
能夠完全以line作為跑團平台。

可同時多團使用，成員在同一時間只能參與一場遊戲，
擔任KP者則不在此限制內(?)。

至於解決heroku休眠而清除資料的情況，
可以利用網站監控的工具來避免，
這裡使用了網路上的免費工具: Uptime Reboot
設定每五分鐘訪問該bot使用網域一次，
技巧性的避免了休眠。


=======遊戲房功能=======
開啟遊戲房之後才能使用角卡、KP和暗骰的功能，
須注意這個功能必須在「群組」使用，
在「聊天室」以及「私密」是沒有作用的。
========================

設定進行遊戲的群組房間
setgp

*在設定完遊戲房之後會出現訊息提示
*請玩家成員複製訊息，刪掉多餘的文字之後
*私密bot以加入遊戲房

關閉遊戲房間，清除房間資料
leaveroom

*將bot踢出群組也有一樣的效果
*清除房間前要記得輸出角卡，清除時會一並清空角卡資料
*使用完畢請盡量清除房間資料

加入遊戲房間
私:join [room Uid]

*私密bot，輸入指令以告知bot你加入的遊戲房
*如setgp的說明所述
*輸入指令後會在加入的群組有訊息提示，請回到群組看有無提示，若沒看到可能是指令錯誤或RoomID輸入錯誤
*玩家在同一時間只能參與一個遊戲房間，再次輸入這個指令可以直接參與到其他房間，但是你的角色卡資訊不會轉移

========角卡功能========
實現了角色卡的大部份功能，可以紀錄角色技能、物品、特殊狀態等等，
並有方法簡便的做出屬性的判定，
支援bot板角色卡的匯入匯出，
TRPG網頁版輸出的角卡也可以匯入。
========================

啟動詞: (char/角色)


建立角色 (建立/new)
角色 建立 海倫
char new helen

角卡輸入 (建立/new)
char new 山田 [bot輸出的角卡資訊一大串]

TRPG網頁板角卡輸入(目前支援COC7模組)
char new 山田 TRPG [TRPG網頁板角卡字串一大串]

列出所有角色 (list/清單)
char list

**在角色建立後可以省略(char/角色)的指令
**以角色名稱作為啟動詞
**以下範例輸入皆省略了(char/角色)

角卡輸出 
竹中 output
*可以利用line功能，keep下來
*格式僅在本bot適用

角色狀態 (show/狀態/屬性/(空白))
由梨 狀態
田中

刪除角卡 (delete/刪除)
本田 刪除

增加技能，並可以給初始值 (addskill)
曉明 addskill 星爆氣流斬 40
撫子 addskill 靈魂抽取

移除技能 (deleteskill)
Ken deleteskill 拔刀術

修改角色屬性 
良介 str 6
佑實 app +3
平川 status 發瘋
Cris item 臭酸便當
*屬性為數值的項目可以用加減來改變數值

技能成功率檢定 (ccb 已有技能)	
彩子 ccb 鬥毆

顯示所有技能 (skills)
龍太 skills

======KP與暗骰功能======
kplock功能提升了管理與跑團的效率，
暗骰的實現也增加了系統的完整性，
需要在群組加入bot，自己也加bot為好友，
以下許多動作會分為私密與在群組中發話。

**暗骰功能需要下過setgp，setkp的指令才能作用**
========================

私:setkp 
*設定本Bot的KP，有設定KP時才有暗骰功能
*在有KP時，只有KP可以改動角卡內容(群、私)
*在有KP時，角色只有角色的建立者可以做暗骰(私)

私:killkp
*解除KP，只有KP可以使用這個指令

玩家私:[角色名稱] ccd 心理學
*暗骰行為與結果只有KP會看到。

玩家群:[角色名稱] ccd 心理學
*暗骰結果只有KP會看到，但其他人知道你做了暗骰。

KP私:ccd 成功率 技能
*暗骰結果只有KP會看到，群組聊天室只知道你做了暗骰，但不知道結果與什麼技能。

KP群:ccd 成功率 技能
*暗骰結果只有KP會看到。

私:getuid
*得到line帳號的userID，可以讓KP設定腳色的使用者
*ps. 在群組打這個指令會得到groupID，沒有實際作用

========基本功能========
以下是前輩開發的原有基本功能，
移除了內部不常用的一些功能。
========================

基本擲骰
1d10
2d6+3d4
3d6 鐵拳攻擊
*支援四則運算，可以加上空白後發言

複數擲骰
5 3D6

coc技能骰 (ccb 成功率 技能)
ccb 50
ccb 30 抓兔子

DB查詢 (db 數值)
STR+SIZE的傷害加權
db 15

coc創角功能
coc創角

========娛樂功能========
以下為娛樂功能，
字句中有關鍵字就會啟動
========================

選擇功能: choice/隨機/選項/幫我選
	隨機選顏色 紅 黃 藍
隨機排序: 排序
	吃東西排序 羊肉 牛肉 豬肉
占卜功能: 運氣/運勢
	今日運勢
死亡FLAG: 立Flag/死亡flag
